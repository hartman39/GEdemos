<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EQT WellStream Analytics - SCADA Monitoring Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f1214;
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #059669 100%);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .eqt-logo {
            width: 60px;
            height: 60px;
            background: #ffffff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: #1e3a8a;
            font-size: 1.2rem;
        }
        
        .system-status {
            text-align: right;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #10b981;
            display: inline-block;
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .main-dashboard {
            padding: 2rem;
            flex: 1;
            overflow-y: auto;
        }
        
        #operations-dashboard {
            display: grid !important;
            grid-template-columns: 2fr minmax(300px, 1fr) !important;
            gap: 2rem !important;
            align-items: start !important;
            width: 100% !important;
            min-height: 100% !important;
        }
        
        #operations-dashboard .fleet-overview {
            grid-column: 1 !important;
            margin: 0 !important;
        }
        
        #operations-dashboard .alerts-panel {
            grid-column: 2 !important;
            margin: 0 !important;
        }
        
        #ceo-dashboard {
            display: block;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        #ceo-dashboard .fleet-overview {
            width: 100%;
        }
        
        .fleet-overview {
            background: #1a1f2e;
            border-radius: 12px;
            padding: 2rem;
            border-left: 4px solid #059669;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .kpi-card {
            background: rgba(5, 150, 105, 0.1);
            border: 1px solid rgba(5, 150, 105, 0.3);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }
        
        .kpi-value {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }
        
        .kpi-normal { color: #10b981; }
        .kpi-warning { color: #f59e0b; }
        .kpi-critical { color: #ef4444; }
        
        .wells-map {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 2px solid #334155;
            border-radius: 16px;
            height: 600px;
            position: relative;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
            cursor: crosshair;
            transition: all 0.3s ease;
        }
        
        .wells-map:hover {
            border-color: #059669;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3), 0 0 20px rgba(5, 150, 105, 0.2);
        }
        
        .geographic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.4;
        }
        
        .state-boundary {
            fill: none;
            stroke: rgba(148, 163, 184, 0.6);
            stroke-width: 2;
            stroke-dasharray: 5,5;
        }
        
        .state-fill {
            opacity: 0.1;
        }
        
        .pennsylvania { fill: #059669; }
        .west-virginia { fill: #0ea5e9; }
        .ohio { fill: #f59e0b; }
        
        .shale-formation {
            fill: none;
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 1;
            stroke-dasharray: 3,3;
        }
        
        .state-label {
            fill: rgba(148, 163, 184, 0.9);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            text-anchor: middle;
        }
        
        .formation-label {
            fill: rgba(148, 163, 184, 0.7);
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            font-weight: 500;
            text-anchor: middle;
            font-style: italic;
        }
        
        .well-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
            z-index: 10;
        }
        
        .well-dot:hover {
            transform: scale(1.8);
            z-index: 20;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.6);
            border-color: rgba(255,255,255,0.8);
        }
        
        .well-dot.selected {
            transform: scale(2);
            z-index: 30;
            animation: selectedPulse 2s infinite;
        }
        
        .well-dot.optimal { 
            background: radial-gradient(circle, #10b981 0%, #047857 100%);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
        }
        
        .well-dot.warning { 
            background: radial-gradient(circle, #f59e0b 0%, #d97706 100%);
            animation: warningPulse 2s infinite;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
        }
        
        .well-dot.critical { 
            background: radial-gradient(circle, #ef4444 0%, #dc2626 100%);
            animation: criticalPulse 1.5s infinite;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.6);
        }
        
        .well-dot.high-production {
            width: 16px;
            height: 16px;
        }
        
        @keyframes selectedPulse {
            0%, 100% { 
                box-shadow: 0 4px 20px rgba(59, 130, 246, 0.6);
            }
            50% { 
                box-shadow: 0 6px 30px rgba(59, 130, 246, 0.9);
            }
        }
        
        @keyframes warningPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes criticalPulse {
            0%, 100% { 
                opacity: 1;
                box-shadow: 0 2px 8px rgba(239, 68, 68, 0.6);
            }
            50% { 
                opacity: 0.8;
                box-shadow: 0 4px 15px rgba(239, 68, 68, 0.8);
            }
        }
        
        .regional-boundary {
            position: absolute;
            border: 1px dashed rgba(100, 116, 139, 0.4);
            border-radius: 8px;
            pointer-events: none;
        }
        
        .regional-label {
            position: absolute;
            color: rgba(148, 163, 184, 0.8);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        .map-legend {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            padding: 1rem;
            font-size: 0.8rem;
            color: #e2e8f0;
            min-width: 200px;
        }
        
        .legend-title {
            font-weight: 700;
            color: #3b82f6;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 0.5rem;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.2);
            flex-shrink: 0;
        }
        
        .map-controls {
            display: flex;
            gap: 0.5rem;
            position: relative;
            z-index: 5;
        }
        
        .map-control-btn {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(100, 116, 139, 0.3);
            color: #e2e8f0;
            padding: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.8rem;
        }
        
        .map-control-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
        }
        
        .map-control-btn.active {
            background: #3b82f6;
            border-color: #3b82f6;
        }
        
        .map-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.85rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.2s ease;
            max-width: 200px;
            border: 1px solid #059669;
        }
        
        .map-tooltip.show {
            opacity: 1;
        }
        
        
        .map-stats {
            font-size: 0.9rem;
        }
        
        .alerts-panel {
            background: #1a1f2e;
            border-radius: 12px;
            padding: 2rem;
            border-left: 4px solid #ef4444;
            height: fit-content;
            min-height: calc(100vh - 200px);
            max-height: calc(100vh - 150px);
            overflow-y: auto;
            position: sticky;
            top: 1rem;
            min-width: 0;
        }
        
        .alert-item {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .alert-item:hover {
            background: rgba(239, 68, 68, 0.15);
            transform: translateX(5px);
        }
        
        .alert-item.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }
        
        .alert-item.warning:hover {
            background: rgba(245, 158, 11, 0.15);
        }
        
        .alert-severity {
            font-weight: bold;
            font-size: 0.9rem;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }
        
        .claude-section {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .claude-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .claude-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .production-chart {
            background: #1a1f2e;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            height: 200px;
            position: relative;
        }
        
        .chart-bars {
            display: flex;
            align-items: end;
            height: 150px;
            gap: 4px;
            padding: 1rem;
        }
        
        .chart-bar {
            background: linear-gradient(to top, #059669, #10b981);
            border-radius: 2px;
            min-width: 8px;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }
        
        .chart-bar:hover {
            opacity: 1;
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .control-button {
            background: #374151;
            border: 1px solid #4b5563;
            color: #ffffff;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-button:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }
        
        
        .well-details {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a1f2e;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 2rem;
            z-index: 1000;
            min-width: 400px;
        }
        
        .well-details.show {
            display: block;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        
        .overlay.show {
            display: block;
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #374151;
        }
        
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .tab-navigation {
            background: #1a1f2e;
            border-bottom: 1px solid #374151;
            padding: 0 2rem;
            display: flex;
            gap: 0;
        }
        
        .tab-button {
            background: transparent;
            border: none;
            color: #9ca3af;
            padding: 1rem 2rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            color: #059669;
            border-bottom-color: #059669;
            background: rgba(5, 150, 105, 0.1);
        }
        
        .tab-button:hover:not(.active) {
            color: #d1d5db;
            background: rgba(156, 163, 175, 0.1);
        }
        
        .dashboard-content {
            display: none !important;
            width: 100%;
        }
        
        .dashboard-content.active {
            display: block !important;
        }
        
        /* Ensure strict separation between dashboards */
        #ceo-dashboard .wells-map,
        #ceo-dashboard .map-controls,
        #ceo-dashboard .map-stats,
        #ceo-dashboard .production-chart,
        #ceo-dashboard .alerts-panel {
            display: none !important;
        }
        
        /* Hide operations dashboard when CEO dashboard is active */
        body.ceo-active #operations-dashboard {
            display: none !important;
        }
        
        /* Mobile-First Responsive Design */
        
        /* Large tablets and small desktops */
        @media (max-width: 1024px) {
            .header {
                padding: 1rem 1.5rem;
            }
            
            .logo-section {
                gap: 0.8rem;
            }
            
            .eqt-logo {
                width: 50px;
                height: 50px;
                font-size: 1rem;
            }
            
            .system-status {
                font-size: 0.9rem;
            }
        }
        
        /* Tablets */
        @media (max-width: 900px) {
            #operations-dashboard {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .alerts-panel {
                position: static;
                max-height: none;
                height: auto;
                min-height: auto;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
            }
            
            .wells-map {
                height: 400px;
            }
            
            .map-legend {
                position: static;
                margin-top: 1rem;
                width: 100%;
                min-width: auto;
            }
        }
        
        /* Mobile landscape and small tablets */
        @media (max-width: 768px) {
            .header {
                padding: 0.8rem 1rem;
                flex-direction: column;
                gap: 0.8rem;
                text-align: center;
            }
            
            .header .logo-section {
                justify-content: center;
            }
            
            .header .system-status {
                text-align: center;
            }
            
            .main-dashboard {
                padding: 1rem;
            }
            
            .tab-navigation {
                padding: 0 1rem;
                overflow-x: auto;
                white-space: nowrap;
            }
            
            .tab-button {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                white-space: nowrap;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 0.8rem;
            }
            
            .kpi-card {
                padding: 1rem;
            }
            
            .kpi-value {
                font-size: 1.5rem;
            }
            
            .fleet-overview, .alerts-panel {
                padding: 1.2rem;
            }
            
            .wells-map {
                height: 300px;
            }
            
            .map-controls {
                flex-wrap: wrap;
                gap: 0.3rem;
            }
            
            .map-control-btn {
                font-size: 0.7rem;
                padding: 0.4rem 0.6rem;
            }
            
            .production-chart {
                height: 150px;
            }
            
            .alert-item {
                padding: 0.8rem;
                margin-bottom: 0.8rem;
            }
            
            .well-details {
                min-width: 90vw;
                max-width: 90vw;
                margin: 1rem;
                max-height: 80vh;
                overflow-y: auto;
            }
        }
        
        /* Mobile portrait */
        @media (max-width: 480px) {
            .header {
                padding: 0.8rem;
            }
            
            .logo-section div:nth-child(2) div:first-child {
                font-size: 1.2rem;
            }
            
            .logo-section div:nth-child(2) div:last-child {
                font-size: 0.8rem;
            }
            
            .main-dashboard {
                padding: 0.8rem;
            }
            
            .tab-button {
                font-size: 0.8rem;
                padding: 0.7rem 1rem;
            }
            
            .kpi-grid {
                grid-template-columns: 1fr 1fr;
                gap: 0.6rem;
            }
            
            .kpi-card {
                padding: 0.8rem;
            }
            
            .kpi-value {
                font-size: 1.3rem;
                margin-bottom: 0.3rem;
            }
            
            .fleet-overview, .alerts-panel {
                padding: 1rem;
                margin-bottom: 1rem;
            }
            
            .wells-map {
                height: 250px;
            }
            
            .map-legend {
                font-size: 0.7rem;
                padding: 0.8rem;
            }
            
            .production-chart {
                height: 120px;
            }
            
            .alert-item {
                padding: 0.7rem;
                font-size: 0.9rem;
            }
            
            .alert-severity {
                font-size: 0.8rem;
            }
            
            /* CEO Dashboard mobile optimizations */
            #ceo-dashboard .kpi-grid {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }
            
            #ceo-dashboard .kpi-card {
                display: flex;
                justify-content: space-between;
                align-items: center;
                text-align: left;
            }
            
            #ceo-dashboard .kpi-value {
                font-size: 1.5rem;
                margin-bottom: 0;
            }
            
            /* Strategic sections mobile layout */
            div[style*="grid-template-columns: 1fr 1fr 1fr"] {
                display: block !important;
            }
            
            div[style*="grid-template-columns: 1fr 1fr 1fr"] > div {
                margin-bottom: 1.5rem !important;
            }
            
            div[style*="grid-template-columns: 1fr 1fr"] {
                display: block !important;
            }
            
            div[style*="grid-template-columns: 1fr 1fr"] > div {
                margin-bottom: 1rem !important;
            }
            
            div[style*="grid-template-columns: 1fr 1fr 1fr 1fr"] {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 0.8rem !important;
            }
        }
        
        /* Large desktops */
        @media (min-width: 1400px) {
            #operations-dashboard {
                grid-template-columns: 2.5fr minmax(350px, 1fr);
            }
        }
        
        /* Touch-friendly improvements for all mobile devices */
        @media (max-width: 768px) {
            .well-dot {
                width: 16px;
                height: 16px;
                cursor: pointer;
            }
            
            .well-dot:hover {
                transform: scale(2);
            }
            
            .control-button, .map-control-btn, .tab-button {
                min-height: 44px;
                touch-action: manipulation;
                user-select: none;
                -webkit-tap-highlight-color: rgba(5, 150, 105, 0.3);
            }
            
            .tab-button {
                position: relative;
                z-index: 10;
            }
            
            .tab-button:active,
            .tab-button:focus {
                background: rgba(5, 150, 105, 0.2);
                outline: none;
            }
            
            /* Improve scrolling on mobile */
            .alerts-panel {
                -webkit-overflow-scrolling: touch;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-section">
            <div class="eqt-logo">EQT</div>
            <div>
                <div style="font-size: 1.5rem; font-weight: bold;">WellStream Analytics</div>
                <div style="opacity: 0.8;">Real-Time SCADA Monitoring Platform</div>
            </div>
        </div>
        <div class="system-status">
            <div><span class="status-indicator"></span>System Online</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">6,000 Wells • Live Data Feed</div>
        </div>
    </div>

    <div class="tab-navigation">
        <button class="tab-button active" onclick="switchTab('operations', this)">🛢️ Operations Dashboard</button>
        <button class="tab-button" onclick="switchTab('ceo', this)">📊 CEO Dashboard</button>
    </div>

    <div class="main-dashboard">
        <!-- Operations Dashboard -->
        <div id="operations-dashboard" class="dashboard-content active">
            <div class="fleet-overview">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="color: #059669;">🛢️ Well Performance Dashboard</h2>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Last Updated: <span id="timestamp">--:--:-- EST</span></div>
                </div>
            
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="active-wells">5,847</div>
                    <div>Active Wells</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">6,000 total fleet</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="production-rate-ops">847,320</div>
                    <div>Daily Production (MCF)</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">+2.3% vs yesterday</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="daily-revenue">$3.2M</div>
                    <div>Daily Revenue</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">$3.78/MCF avg price</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="pressure-avg">2,340</div>
                    <div>Avg Wellhead Pressure</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">PSI - fleet average</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="opex-per-mcf">$0.47</div>
                    <div>Operating Cost</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">$/MCF - field level</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-warning" id="alerts-count">23</div>
                    <div>Active Alerts</div>
                    <div style="font-size: 0.8rem; color: #f59e0b; margin-top: 0.3rem;">5 critical, 18 maintenance</div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin: 2rem 0 1rem 0;">
                <h3 style="margin: 0;">🗺️ Well Field Geographic Distribution</h3>
                <div class="map-controls">
                    <button class="map-control-btn active" onclick="filterWells('all')" id="filter-all">All Wells</button>
                    <button class="map-control-btn" onclick="filterWells('optimal')" id="filter-optimal">Optimal</button>
                    <button class="map-control-btn" onclick="filterWells('warning')" id="filter-warning">Alerts</button>
                    <button class="map-control-btn" onclick="filterWells('critical')" id="filter-critical">Critical</button>
                </div>
            </div>
            
            <div class="wells-map" id="wells-map">
                <!-- Well dots will be generated here -->
                <div class="map-tooltip" id="map-tooltip"></div>
            </div>
            
            <div class="map-stats" style="display: flex; justify-content: space-around; margin-top: 1rem; padding: 1rem; background: rgba(5, 150, 105, 0.1); border-radius: 8px;">
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #10b981;" id="optimal-count">489</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Optimal Wells</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #f59e0b;" id="warning-count">67</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Maintenance Alerts</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #ef4444;" id="critical-count">9</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Critical Issues</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; font-weight: bold; color: #059669;" id="total-count">565</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Total Displayed</div>
                </div>
            </div>
            
            <h3 style="margin: 2rem 0 1rem 0;">📊 Production Trends (Last 30 Days)</h3>
            <div class="production-chart">
                <div class="chart-bars" id="production-chart">
                    <!-- Chart bars will be generated here -->
                </div>
            </div>
            </div>

            <div class="alerts-panel">
                <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="color: #ef4444;">🚨 Predictive Alerts</h2>
                    <div style="font-size: 0.8rem; opacity: 0.7;">AI-Powered Early Detection</div>
                </div>

                <div class="alert-item" onclick="showWellDetails('GREENE-0847', 'critical', 'Greene County, PA')">
                    <div class="alert-severity" style="color: #ef4444;">🔴 CRITICAL - IMMEDIATE ACTION</div>
                    <div><strong>Well GREENE-0847:</strong> Casing pressure anomaly detected</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                        Wellhead pressure: 3,240 PSI (↗ +15% in 2hrs)<br>
                        Predicted failure window: 8-12 hours<br>
                        Potential loss: $2.3M production + $850K repair
                    </div>
                </div>

                <div class="alert-item warning" onclick="showWellDetails('WETZEL-1523', 'warning', 'Wetzel County, WV')">
                    <div class="alert-severity" style="color: #f59e0b;">🟡 WARNING - MAINTENANCE NEEDED</div>
                    <div><strong>Well WETZEL-1523:</strong> ESP motor temperature trending high</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                        Motor temp: 187°F (normal: 165°F)<br>
                        Recommended action: Schedule inspection within 72hrs<br>
                        Prevention value: $450K avoided downtime
                    </div>
                </div>

                <div class="alert-item warning" onclick="showWellDetails('DODDRIDGE-0934', 'warning', 'Doddridge County, WV')">
                    <div class="alert-severity" style="color: #f59e0b;">🟡 WARNING - FLOW ANOMALY</div>
                    <div><strong>Well DODDRIDGE-0934:</strong> Gas flow rate declining</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                        Production: 4,200 MCF/day (↓ -12% vs baseline)<br>
                        Likely cause: Tubing restriction or hydrate formation<br>
                        Revenue impact: $18K/day loss
                    </div>
                </div>

                <div class="alert-item warning" onclick="showWellDetails('MARSHALL-2156', 'warning', 'Marshall County, WV')">
                    <div class="alert-severity" style="color: #f59e0b;">🟡 WARNING - EQUIPMENT ALERT</div>
                    <div><strong>Well MARSHALL-2156:</strong> Compressor vibration elevated</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                        Vibration: 8.2 mm/s (threshold: 7.0 mm/s)<br>
                        Trend: Gradual increase over 5 days<br>
                        Action: Balance rotor, check bearings
                    </div>
                </div>

                <div class="alert-item" onclick="showWellDetails('WASHINGTON-0673', 'critical', 'Washington County, PA')">
                    <div class="alert-severity" style="color: #ef4444;">🔴 CRITICAL - SAFETY CONCERN</div>
                    <div><strong>Well WASHINGTON-0673:</strong> H2S concentration spike</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                        H2S level: 25 PPM (safety limit: 20 PPM)<br>
                        Personnel evacuation: Initiated<br>
                        Remote shutdown: Activated
                    </div>
                </div>

                <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10b981; border-radius: 8px; padding: 1.5rem; margin-top: 2rem;">
                    <div style="font-weight: bold; color: #10b981; margin-bottom: 1rem;">💡 AI Insights & Cost Impact</div>
                    <div style="font-size: 0.9rem; line-height: 1.5;">
                        <strong>This Month:</strong><br>
                        • $12.3M in potential failures prevented<br>
                        • 847 maintenance events optimized<br>
                        • 99.2% uptime achieved across fleet<br>
                        • 23% reduction in unplanned downtime
                    </div>
                </div>

                <div class="controls">
                    <button class="control-button" onclick="simulateEmergency()">🚨 Simulate Emergency</button>
                    <button class="control-button" onclick="optimizeProduction()">⚡ Optimize Production</button>
                </div>
            </div>
        </div>
        <!-- End Operations Dashboard -->
        
        <!-- CEO Dashboard -->
        <div id="ceo-dashboard" class="dashboard-content">
            <div class="fleet-overview">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="color: #1e3a8a;">📊 CEO Strategic Dashboard</h2>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Last Updated: <span id="timestamp-ceo">--:--:-- EST</span></div>
                </div>
            
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="production-rate-ceo">6.4</div>
                    <div>BCF/Day Production</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">Leading US producer</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="ebitda-run-rate">$6.5B</div>
                    <div>EBITDA Run-Rate</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">+25% YoY growth</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="free-cash-flow">$2.0B</div>
                    <div>Free Cash Flow (TTM)</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">Strong cash generation</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="unit-costs-ceo">$1.08</div>
                    <div>Unit Cost ($/MCF)</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">Industry-leading efficiency</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="carbon-intensity-ceo">0.82</div>
                    <div>Carbon Intensity</div>
                    <div style="font-size: 0.8rem; color: #10b981; margin-top: 0.3rem;">kg CO2e/MCF (ESG Target)</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-normal" id="stock-price">Loading...</div>
                    <div>EQT Stock Price</div>
                    <div style="font-size: 0.8rem; margin-top: 0.3rem;" id="stock-change">Live data</div>
                </div>
            </div>
            
            <!-- CEO Strategic Dashboard -->
            <div style="background: rgba(30, 58, 138, 0.1); border: 1px solid #1e3a8a; border-radius: 12px; padding: 2rem; margin: 2rem 0;">
                <h3 style="color: #1e3a8a; margin-bottom: 1rem;">📊 Strategic Command Center</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem;">
                    <div>
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">🏆 Market Leadership</div>
                        <div style="font-size: 0.9rem; line-height: 1.4;">
                            • <strong>US Market Position:</strong> #1 Natural Gas Producer<br>
                            • <strong>Competitive Advantage:</strong> 27% cost advantage vs peers<br>
                            • <strong>Scale Dominance:</strong> 5.2 BCF/day (vs CHK 3.1 BCF/day)<br>
                            • <strong>Reserves:</strong> 27.6 TCF proved (15+ years inventory)
                        </div>
                    </div>
                    <div>
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">💎 Shareholder Value</div>
                        <div style="font-size: 0.9rem; line-height: 1.4;">
                            • <strong>Free Cash Yield:</strong> 12.4% (top quartile)<br>
                            • <strong>Capital Returns:</strong> $600M returned YTD<br>
                            • <strong>Dividend Growth:</strong> 8% increase this quarter<br>
                            • <strong>ROE Performance:</strong> 18.7% vs 12% peer average
                        </div>
                    </div>
                    <div>
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">🌍 ESG Excellence</div>
                        <div style="font-size: 0.9rem; line-height: 1.4;">
                            • <strong>Emission Reduction:</strong> -15% carbon intensity YoY<br>
                            • <strong>Methane Target:</strong> 0.20% intensity by 2025<br>
                            • <strong>Safety Record:</strong> 0.47 TRIR (best in class)<br>
                            • <strong>Community Impact:</strong> $47M local economic benefit
                        </div>
                    </div>
                </div>
            </div>
            

            </div>
        </div>
        <!-- End CEO Dashboard -->
    </div>

    <footer style="background: #111827; color: #9ca3af; text-align: center; padding: 1rem; font-size: 0.9rem; border-top: 1px solid #374151; margin-top: 2rem;">
        <p>Anthropic, Built with <a href="https://www.anthropic.com" target="_blank" style="color: #3b82f6; text-decoration: none;">Claude Code</a></p>
    </footer>

    <!-- Well Details Modal -->
    <div class="overlay" id="overlay" onclick="closeWellDetails()"></div>
    <div class="well-details" id="well-details">
        <button class="close-btn" onclick="closeWellDetails()">×</button>
        <h3 id="well-name">Well Details</h3>
        <div id="well-content">
            <!-- Content will be populated dynamically -->
        </div>
    </div>


    <script>
        // Tab switching functionality
        function switchTab(tabName, targetButton) {
            // Hide all dashboard contents
            document.querySelectorAll('.dashboard-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected dashboard content
            const targetDashboard = document.getElementById(tabName + '-dashboard');
            if (targetDashboard) {
                targetDashboard.classList.add('active');
                targetDashboard.style.display = 'block';
            }
            
            // Add active class to clicked tab button
            // Try to get the target button from event or parameter
            const buttonToActivate = targetButton || 
                                   (window.event && window.event.target) || 
                                   document.querySelector(`button[onclick*="switchTab('${tabName}')"`);
            
            if (buttonToActivate && buttonToActivate.classList) {
                buttonToActivate.classList.add('active');
            }
            
            // Update body class based on active dashboard
            document.body.className = document.body.className.replace(/\b(operations|ceo)-active\b/g, '');
            document.body.classList.add(tabName + '-active');
            
            // If switching to CEO dashboard, ensure operations-specific elements are hidden
            if (tabName === 'ceo') {
                hideOperationsElements();
            }
        }
        
        function hideOperationsElements() {
            // Additional safety check - ensure operations elements are hidden when on CEO dashboard
            // This is handled by the main tab switching, but provides extra assurance
        }

        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                timeZone: 'America/New_York',
                hour12: false
            }) + ' EST';
            
            const timestampEl = document.getElementById('timestamp');
            const timestampCeoEl = document.getElementById('timestamp-ceo');
            
            if (timestampEl) timestampEl.textContent = timeString;
            if (timestampCeoEl) timestampCeoEl.textContent = timeString;
        }
        updateTimestamp();
        setInterval(updateTimestamp, 1000);
        
        // Initialize dashboard visibility on page load
        function initializeDashboards() {
            document.querySelectorAll('.dashboard-content').forEach(content => {
                if (content.classList.contains('active')) {
                    content.style.display = 'block';
                    // Set body class based on active dashboard
                    if (content.id === 'ceo-dashboard') {
                        document.body.classList.add('ceo-active');
                        hideOperationsElements();
                    } else if (content.id === 'operations-dashboard') {
                        document.body.classList.add('operations-active');
                    }
                } else {
                    content.style.display = 'none';
                }
            });
        }
        
        // Initialize on page load
        initializeDashboards();

        // Map tooltip functions
        let currentTooltip = null;
        
        function showMapTooltip(event, wellId, status, county) {
            const tooltip = document.getElementById('map-tooltip');
            const statusColor = status === 'optimal' ? '#10b981' : status === 'warning' ? '#f59e0b' : '#ef4444';
            const statusText = status === 'optimal' ? 'Optimal Performance' : status === 'warning' ? 'Maintenance Alert' : 'Critical Issue';
            const production = Math.floor(2000 + Math.random() * 6000);
            const pressure = Math.floor(2000 + Math.random() * 1000);
            
            tooltip.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 0.5rem;">${wellId}</div>
                <div style="color: ${statusColor}; font-weight: 600; margin-bottom: 0.3rem;">${statusText}</div>
                <div style="font-size: 0.8rem; opacity: 0.9;">
                    <div>📍 ${county.name}, ${county.state}</div>
                    <div>⛽ ${production.toLocaleString()} MCF/day</div>
                    <div>📊 ${pressure} PSI</div>
                </div>
            `;
            
            updateTooltipPosition(event);
            tooltip.classList.add('show');
            currentTooltip = tooltip;
        }
        
        function hideMapTooltip() {
            const tooltip = document.getElementById('map-tooltip');
            tooltip.classList.remove('show');
            currentTooltip = null;
        }
        
        function updateTooltipPosition(event) {
            if (currentTooltip) {
                const rect = event.currentTarget.closest('.wells-map').getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                currentTooltip.style.left = (x + 15) + 'px';
                currentTooltip.style.top = (y - 10) + 'px';
            }
        }
        
        // Well filtering functionality
        function filterWells(filterType) {
            const wells = document.querySelectorAll('.well-dot');
            const buttons = document.querySelectorAll('.map-control-btn');
            
            // Update button states
            buttons.forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter-${filterType}`).classList.add('active');
            
            // Filter wells
            wells.forEach(well => {
                if (filterType === 'all') {
                    well.style.display = 'block';
                    well.style.opacity = '0.9';
                } else {
                    const wellStatus = well.getAttribute('data-status');
                    if (wellStatus === filterType) {
                        well.style.display = 'block';
                        well.style.opacity = '1';
                        well.style.transform = 'scale(1.2)';
                    } else {
                        well.style.opacity = '0.2';
                        well.style.transform = 'scale(0.8)';
                    }
                }
            });
            
            // Update stats
            updateMapStats();
        }
        
        function updateMapStats() {
            const wells = document.querySelectorAll('.well-dot');
            let optimal = 0, warning = 0, critical = 0;
            
            wells.forEach(well => {
                const status = well.getAttribute('data-status');
                if (status === 'optimal') optimal++;
                else if (status === 'warning') warning++;
                else if (status === 'critical') critical++;
            });
            
            document.getElementById('optimal-count').textContent = optimal;
            document.getElementById('warning-count').textContent = warning;
            document.getElementById('critical-count').textContent = critical;
            document.getElementById('total-count').textContent = wells.length;
        }

        // Generate well map based on EQT's actual operational footprint
        function generateWellMap() {
            const map = document.getElementById('wells-map');
            
            // Add geographic SVG overlay first
            const geographicOverlay = document.createElement('div');
            geographicOverlay.className = 'geographic-overlay';
            geographicOverlay.innerHTML = `
                <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <!-- Ohio outline (westernmost) -->
                    <path class="state-fill ohio" d="M50 80 L120 75 L125 95 L130 115 L125 140 L120 160 L110 175 L90 180 L70 175 L55 160 L50 140 L52 120 L50 100 Z"/>
                    <path class="state-boundary" d="M50 80 L120 75 L125 95 L130 115 L125 140 L120 160 L110 175 L90 180 L70 175 L55 160 L50 140 L52 120 L50 100 Z"/>
                    
                    <!-- West Virginia outline (center, panhandle shape) -->  
                    <path class="state-fill west-virginia" d="M120 120 L180 115 L200 125 L220 135 L210 155 L200 175 L180 185 L160 190 L140 185 L125 170 L115 150 L118 135 Z"/>
                    <path class="state-boundary" d="M120 120 L180 115 L200 125 L220 135 L210 155 L200 175 L180 185 L160 190 L140 185 L125 170 L115 150 L118 135 Z"/>
                    
                    <!-- Pennsylvania outline (easternmost, rectangular shape) -->
                    <path class="state-fill pennsylvania" d="M200 60 L340 55 L345 75 L350 95 L345 115 L340 135 L320 140 L300 145 L280 140 L240 135 L220 130 L205 120 L200 100 L195 80 Z"/>
                    <path class="state-boundary" d="M200 60 L340 55 L345 75 L350 95 L345 115 L340 135 L320 140 L300 145 L280 140 L240 135 L220 130 L205 120 L200 100 L195 80 Z"/>
                    
                    <!-- Marcellus Shale Formation (spans PA and WV) -->
                    <ellipse class="shale-formation" cx="200" cy="130" rx="90" ry="50" transform="rotate(10 200 130)"/>
                    
                    <!-- Utica Shale Formation (primarily in eastern OH extending into PA) -->
                    <ellipse class="shale-formation" cx="140" cy="110" rx="50" ry="35" transform="rotate(-5 140 110)"/>
                    
                    <!-- State labels -->
                    <text class="state-label" x="85" y="130">OHIO</text>
                    <text class="state-label" x="170" y="155">WEST VIRGINIA</text>
                    <text class="state-label" x="275" y="100">PENNSYLVANIA</text>
                    
                    <!-- Formation labels -->
                    <text class="formation-label" x="200" y="150">Marcellus Shale</text>
                    <text class="formation-label" x="140" y="125">Utica Shale</text>
                </svg>
            `;
            map.appendChild(geographicOverlay);
            
            // EQT's operational areas with corrected geographic positioning
            const operationalAreas = [
                // Pennsylvania - Marcellus Shale (southwestern counties, now correctly positioned on the east)
                { name: 'Greene County, PA', wells: 120, region: [60, 70, 32, 42], density: 'high', coords: [65, 37] },
                { name: 'Washington County, PA', wells: 110, region: [70, 80, 28, 38], density: 'high', coords: [75, 33] },
                
                // West Virginia - Marcellus Shale (northern counties, positioned in center)
                { name: 'Wetzel County, WV', wells: 85, region: [35, 45, 35, 45], density: 'high', coords: [40, 40] },
                { name: 'Marshall County, WV', wells: 70, region: [45, 55, 35, 45], density: 'medium', coords: [50, 40] },
                { name: 'Doddridge County, WV', wells: 60, region: [40, 50, 48, 58], density: 'medium', coords: [45, 53] },
                { name: 'Marion County, WV', wells: 45, region: [48, 58, 52, 62], density: 'medium', coords: [53, 57] },
                { name: 'Tyler County, WV', wells: 40, region: [32, 42, 45, 55], density: 'medium', coords: [37, 50] },
                
                // Ohio - Utica Shale (eastern counties, now correctly positioned on the west)
                { name: 'Belmont County, OH', wells: 35, region: [25, 35, 30, 40], density: 'low', coords: [30, 35] }
            ];
            
            // Add regional boundaries first
            operationalAreas.forEach(area => {
                const [minX, maxX, minY, maxY] = area.region;
                
                // Create regional boundary
                const boundary = document.createElement('div');
                boundary.className = 'regional-boundary';
                boundary.style.left = (minX - 1) + '%';
                boundary.style.top = (minY - 1) + '%';
                boundary.style.width = (maxX - minX + 2) + '%';
                boundary.style.height = (maxY - minY + 2) + '%';
                map.appendChild(boundary);
                
                // Add regional label
                const label = document.createElement('div');
                label.className = 'regional-label';
                label.textContent = area.name.split(' County')[0];
                label.style.left = (minX + 2) + '%';
                label.style.top = (minY + 1) + '%';
                map.appendChild(label);
            });
            
            // Add wells
            operationalAreas.forEach(area => {
                for (let i = 0; i < area.wells; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'well-dot';
                    
                    // Assign status based on realistic distribution
                    const rand = Math.random();
                    if (rand < 0.05) {
                        dot.classList.add('critical');
                    } else if (rand < 0.15) {
                        dot.classList.add('warning');
                    } else {
                        dot.classList.add('optimal');
                    }
                    
                    // Make some wells larger based on production (high-production wells)
                    if (area.density === 'high' && Math.random() < 0.2) {
                        dot.classList.add('high-production');
                    }
                    
                    // Position wells within the specific county region
                    const [minX, maxX, minY, maxY] = area.region;
                    dot.style.left = (minX + Math.random() * (maxX - minX)) + '%';
                    dot.style.top = (minY + Math.random() * (maxY - minY)) + '%';
                    
                    // Add clustering effect for high-density areas
                    if (area.density === 'high' && Math.random() < 0.3) {
                        // Create clusters by positioning some wells closer together
                        const clusterCenterX = minX + Math.random() * (maxX - minX);
                        const clusterCenterY = minY + Math.random() * (maxY - minY);
                        dot.style.left = Math.max(0, Math.min(95, clusterCenterX + (Math.random() * 6 - 3))) + '%';
                        dot.style.top = Math.max(0, Math.min(95, clusterCenterY + (Math.random() * 6 - 3))) + '%';
                    }
                    
                    // Create well names based on actual EQT naming conventions
                    const wellNumber = String(Math.floor(Math.random() * 9999)).padStart(4, '0');
                    const wellName = area.name.split(' County')[0].replace(' ', '').toUpperCase() + '-' + wellNumber;
                    
                    let selectedWell = null;
                    
                    dot.onclick = () => {
                        // Remove previous selection
                        if (selectedWell) {
                            selectedWell.classList.remove('selected');
                        }
                        
                        // Add selection to current well
                        dot.classList.add('selected');
                        selectedWell = dot;
                        
                        const status = dot.classList.contains('critical') ? 'critical' : 
                                      dot.classList.contains('warning') ? 'warning' : 'optimal';
                        showWellDetails(wellName, status, area.name);
                    };
                    
                    // Add tooltip with location info
                    dot.title = `${wellName} - ${area.name}`;
                    
                    map.appendChild(dot);
                }
            });
            
            // Map controls are handled in the HTML template, not dynamically added
            
            // Add enhanced legend with geographic context
            const legend = document.createElement('div');
            legend.className = 'map-legend';
            legend.innerHTML = `
                <div class="legend-title">EQT Operations Map</div>
                
                <div style="margin-bottom: 1rem;">
                    <div style="font-weight: 600; margin-bottom: 0.5rem; color: #94a3b8;">Formations</div>
                    <div class="legend-item" style="margin-bottom: 0.3rem;">
                        <div style="width: 20px; height: 3px; background: rgba(255,255,255,0.3); border-radius: 2px;"></div>
                        <div style="font-size: 0.75rem;">Marcellus Shale (PA, WV)</div>
                    </div>
                    <div class="legend-item" style="margin-bottom: 0.3rem;">
                        <div style="width: 20px; height: 3px; background: rgba(255,255,255,0.3); border-radius: 2px;"></div>
                        <div style="font-size: 0.75rem;">Utica Shale (OH)</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 1rem;">
                    <div style="font-weight: 600; margin-bottom: 0.5rem; color: #94a3b8;">Well Status</div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: radial-gradient(circle, #10b981 0%, #047857 100%); box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);"></div>
                        <div>Optimal Performance</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: radial-gradient(circle, #f59e0b 0%, #d97706 100%); box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);"></div>
                        <div>Maintenance Alerts</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: radial-gradient(circle, #ef4444 0%, #dc2626 100%); box-shadow: 0 2px 8px rgba(239, 68, 68, 0.6);"></div>
                        <div>Critical Issues</div>
                    </div>
                </div>
                
                <div style="padding-top: 0.8rem; border-top: 1px solid rgba(100, 116, 139, 0.3); font-size: 0.7rem; opacity: 0.8;">
                    <strong>565 wells</strong> displayed<br>
                    <span style="opacity: 0.6;">Sample of 6,000+ active fleet</span><br>
                    <span style="opacity: 0.6; font-size: 0.65rem;">Real-time SCADA monitoring</span>
                </div>
            `;
            map.appendChild(legend);
        }

        // Generate production chart
        function generateProductionChart() {
            const chart = document.getElementById('production-chart');
            const days = 30;
            
            for (let i = 0; i < days; i++) {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                
                // Simulate production data with some variation
                const baseHeight = 60 + (Math.sin(i / 5) * 20) + (Math.random() * 40);
                bar.style.height = Math.max(10, baseHeight) + 'px';
                bar.style.flex = '1';
                
                bar.title = `Day ${i + 1}: ${(800000 + Math.random() * 100000).toFixed(0)} MCF`;
                
                chart.appendChild(bar);
            }
        }

        // Real-time data simulation
        function simulateRealTimeData() {
            const activeWells = document.getElementById('active-wells');
            const productionRate = document.getElementById('production-rate');
            const dailyRevenue = document.getElementById('daily-revenue');
            const pressureAvg = document.getElementById('pressure-avg');
            const opexPerMcf = document.getElementById('opex-per-mcf');
            const alertsCount = document.getElementById('alerts-count');
            
            // Simulate small fluctuations in real-time data
            const baseValues = {
                wells: 5847,
                production: 847320,
                revenue: 3.2,
                pressure: 2340,
                opex: 0.47,
                alerts: 23
            };
            
            setInterval(() => {
                const currentProd = baseValues.production + Math.floor(Math.random() * 10000 - 5000);
                const gasPrice = 3.78 + (Math.random() * 0.20 - 0.10); // Small price fluctuations
                const currentRevenue = (currentProd * gasPrice) / 1000000; // Convert to millions
                
                activeWells.textContent = (baseValues.wells + Math.floor(Math.random() * 20 - 10)).toLocaleString();
                productionRate.textContent = currentProd.toLocaleString();
                dailyRevenue.textContent = '$' + currentRevenue.toFixed(1) + 'M';
                pressureAvg.textContent = (baseValues.pressure + Math.floor(Math.random() * 100 - 50)).toLocaleString();
                opexPerMcf.textContent = '$' + (baseValues.opex + (Math.random() * 0.10 - 0.05)).toFixed(2);
                alertsCount.textContent = Math.max(15, baseValues.alerts + Math.floor(Math.random() * 10 - 5));
            }, 5000);
        }

        // Show well details modal
        function showWellDetails(wellName, status, location) {
            const modal = document.getElementById('well-details');
            const overlay = document.getElementById('overlay');
            const wellNameEl = document.getElementById('well-name');
            const wellContent = document.getElementById('well-content');
            
            wellNameEl.textContent = wellName + ' - Detailed Analysis';
            
            const wellData = generateWellData(wellName, status, location);
            wellContent.innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <strong>Location:</strong> ${wellData.location}<br>
                    <strong>Well Type:</strong> ${wellData.type}<br>
                    <strong>Spud Date:</strong> ${wellData.spudDate}<br>
                    <strong>Current Status:</strong> <span style="color: ${wellData.statusColor}">${wellData.status}</span>
                </div>
                
                <h4 style="margin: 1rem 0; color: #059669;">Current Measurements</h4>
                <div class="metric-row">
                    <span>Gas Flow Rate:</span>
                    <span style="color: ${wellData.flow.color}">${wellData.flow.value} MCF/day</span>
                </div>
                <div class="metric-row">
                    <span>Wellhead Pressure:</span>
                    <span style="color: ${wellData.pressure.color}">${wellData.pressure.value} PSI</span>
                </div>
                <div class="metric-row">
                    <span>Tubing Pressure:</span>
                    <span>${wellData.tubingPressure} PSI</span>
                </div>
                <div class="metric-row">
                    <span>Casing Pressure:</span>
                    <span>${wellData.casingPressure} PSI</span>
                </div>
                <div class="metric-row">
                    <span>Water Cut:</span>
                    <span>${wellData.waterCut}%</span>
                </div>
                <div class="metric-row">
                    <span>CHK Temperature:</span>
                    <span>${wellData.temperature}°F</span>
                </div>
                
                <h4 style="margin: 1rem 0; color: #f59e0b;">Equipment Status</h4>
                <div class="metric-row">
                    <span>ESP Motor:</span>
                    <span style="color: ${wellData.equipment.motor.color}">${wellData.equipment.motor.status}</span>
                </div>
                <div class="metric-row">
                    <span>Surface Pump:</span>
                    <span style="color: ${wellData.equipment.pump.color}">${wellData.equipment.pump.status}</span>
                </div>
                <div class="metric-row">
                    <span>Separator:</span>
                    <span style="color: ${wellData.equipment.separator.color}">${wellData.equipment.separator.status}</span>
                </div>
                
                ${status !== 'optimal' ? `
                <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                    <h4 style="color: #ef4444; margin-bottom: 0.5rem;">⚠️ Active Issues</h4>
                    <div style="font-size: 0.9rem;">
                        ${wellData.issues.join('<br>')}
                    </div>
                </div>
                ` : ''}
                
                <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                    <h4 style="color: #3b82f6; margin-bottom: 0.5rem;">💡 AI Recommendations</h4>
                    <div style="font-size: 0.9rem;">
                        ${wellData.recommendations.join('<br>')}
                    </div>
                </div>
            `;
            
            modal.classList.add('show');
            overlay.classList.add('show');
        }

        // Close well details modal
        function closeWellDetails() {
            document.getElementById('well-details').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        // Generate realistic well data
        function generateWellData(wellName, status, location) {
            const shaleFormation = location && location.includes('OH') ? 'Utica Shale' : 'Marcellus Shale';
            const types = ['Horizontal Gas', 'Directional Gas', 'Multi-Zone Horizontal'];
            
            const data = {
                location: location ? `${location} - ${shaleFormation}` : shaleFormation,
                type: types[Math.floor(Math.random() * types.length)],
                spudDate: new Date(2020 + Math.random() * 4, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28)).toLocaleDateString(),
                tubingPressure: (1800 + Math.random() * 800).toFixed(0),
                casingPressure: (2200 + Math.random() * 1000).toFixed(0),
                waterCut: (Math.random() * 15).toFixed(1),
                temperature: (145 + Math.random() * 30).toFixed(0)
            };
            
            if (status === 'critical') {
                data.status = 'CRITICAL';
                data.statusColor = '#ef4444';
                data.flow = { value: (2000 + Math.random() * 2000).toFixed(0), color: '#ef4444' };
                data.pressure = { value: (3000 + Math.random() * 500).toFixed(0), color: '#ef4444' };
                data.equipment = {
                    motor: { status: 'FAULT', color: '#ef4444' },
                    pump: { status: 'DEGRADED', color: '#f59e0b' },
                    separator: { status: 'NORMAL', color: '#10b981' }
                };
                data.issues = [
                    '• Casing pressure exceeding safe operating limits',
                    '• ESP motor temperature elevated (195°F)',
                    '• Potential tubing leak detected'
                ];
                data.recommendations = [
                    '• Immediate shut-in recommended for safety',
                    '• Schedule workover to inspect tubing integrity',
                    '• Replace ESP motor before restart'
                ];
            } else if (status === 'warning') {
                data.status = 'WARNING';
                data.statusColor = '#f59e0b';
                data.flow = { value: (4000 + Math.random() * 2000).toFixed(0), color: '#f59e0b' };
                data.pressure = { value: (2500 + Math.random() * 300).toFixed(0), color: '#f59e0b' };
                data.equipment = {
                    motor: { status: 'DEGRADED', color: '#f59e0b' },
                    pump: { status: 'NORMAL', color: '#10b981' },
                    separator: { status: 'NORMAL', color: '#10b981' }
                };
                data.issues = [
                    '• Production declining 3% over last 7 days',
                    '• Motor temperature trending upward',
                    '• Vibration levels slightly elevated'
                ];
                data.recommendations = [
                    '• Schedule maintenance inspection within 72 hours',
                    '• Monitor motor temperature closely',
                    '• Consider artificial lift optimization'
                ];
            } else {
                data.status = 'OPTIMAL';
                data.statusColor = '#10b981';
                data.flow = { value: (5000 + Math.random() * 3000).toFixed(0), color: '#10b981' };
                data.pressure = { value: (2000 + Math.random() * 400).toFixed(0), color: '#10b981' };
                data.equipment = {
                    motor: { status: 'NORMAL', color: '#10b981' },
                    pump: { status: 'NORMAL', color: '#10b981' },
                    separator: { status: 'NORMAL', color: '#10b981' }
                };
                data.issues = [];
                data.recommendations = [
                    '• Well performing within optimal parameters',
                    '• Continue current operating conditions',
                    '• Next scheduled maintenance in 45 days'
                ];
            }
            
            return data;
        }

        // Simulate emergency scenario
        function simulateEmergency() {
            const alertsPanel = document.querySelector('.alerts-panel');
            alertsPanel.style.borderLeftColor = '#dc2626';
            
            // Add emergency alert to top
            const emergencyAlert = document.createElement('div');
            emergencyAlert.className = 'alert-item';
            emergencyAlert.style.borderColor = '#dc2626';
            emergencyAlert.style.background = 'rgba(220, 38, 38, 0.15)';
            emergencyAlert.innerHTML = `
                <div class="alert-severity" style="color: #dc2626;">🔴 EMERGENCY - BLOWOUT PREVENTER</div>
                <div><strong>Well MONONGALIA-0001:</strong> BOP pressure test failure</div>
                <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.9;">
                    BOP test pressure: 2,100 PSI (required: 3,000 PSI)<br>
                    AUTOMATIC SHUT-IN ACTIVATED<br>
                    All personnel evacuated from wellsite
                </div>
            `;
            
            alertsPanel.insertBefore(emergencyAlert, alertsPanel.children[1]);
            
            // Update KPI to show emergency impact
            document.getElementById('alerts-count').textContent = '24';
            document.getElementById('alerts-count').className = 'kpi-value kpi-critical';
            
            setTimeout(() => {
                emergencyAlert.remove();
                alertsPanel.style.borderLeftColor = '#ef4444';
                document.getElementById('alerts-count').textContent = '23';
            }, 10000);
        }

        // Optimize production simulation
        function optimizeProduction() {
            const productionRate = document.getElementById('production-rate');
            const currentRate = parseInt(productionRate.textContent.replace(/,/g, ''));
            const optimizedRate = Math.floor(currentRate * 1.08);
            
            productionRate.style.color = '#3b82f6';
            productionRate.textContent = optimizedRate.toLocaleString();
            
            // Show optimization message
            const optimizationMsg = document.createElement('div');
            optimizationMsg.style.cssText = `
                position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                color: white; padding: 1rem 2rem; border-radius: 12px; z-index: 10000;
                font-weight: bold; animation: slideIn 0.3s ease-out;
            `;
            optimizationMsg.innerHTML = `
                ⚡ Production Optimization Complete<br>
                <span style="font-size: 0.9rem; opacity: 0.9;">+8% efficiency gain applied across fleet</span>
            `;
            document.body.appendChild(optimizationMsg);
            
            setTimeout(() => {
                productionRate.style.color = '#10b981';
                optimizationMsg.remove();
            }, 5000);
        }

        // Filter wells by status
        function filterWells(filterType) {
            const wells = document.querySelectorAll('.well-dot');
            const controlButtons = document.querySelectorAll('.map-control-btn');
            
            // Update active button
            controlButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            wells.forEach(well => {
                if (filterType === 'all') {
                    well.style.display = 'block';
                    well.style.opacity = '1';
                } else if (filterType === 'critical' && well.classList.contains('critical')) {
                    well.style.display = 'block';
                    well.style.opacity = '1';
                } else if (filterType === 'warning' && well.classList.contains('warning')) {
                    well.style.display = 'block';
                    well.style.opacity = '1';
                } else if (filterType === 'optimal' && well.classList.contains('optimal')) {
                    well.style.display = 'block';
                    well.style.opacity = '1';
                } else {
                    well.style.opacity = '0.2';
                }
            });
        }

        // Mobile optimization functions
        function initMobileOptimizations() {
            // Detect mobile device
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // Add mobile-specific event listeners
                document.body.classList.add('mobile-device');
                
                // Improve touch response for map interactions
                const wellDots = document.querySelectorAll('.well-dot');
                wellDots.forEach(dot => {
                    // Add touch feedback
                    dot.addEventListener('touchstart', function(e) {
                        this.style.transform = 'scale(1.5)';
                        this.style.zIndex = '1000';
                    });
                    
                    dot.addEventListener('touchend', function(e) {
                        setTimeout(() => {
                            this.style.transform = '';
                            this.style.zIndex = '';
                        }, 200);
                    });
                });
                
                // Optimize tab switching for mobile
                const tabButtons = document.querySelectorAll('.tab-button');
                tabButtons.forEach(button => {
                    // Add touch feedback
                    button.addEventListener('touchstart', function(e) {
                        this.style.background = 'rgba(5, 150, 105, 0.2)';
                        e.preventDefault(); // Prevent ghost clicks
                    });
                    
                    // Handle touch end with proper tab switching
                    button.addEventListener('touchend', function(e) {
                        e.preventDefault(); // Prevent ghost clicks
                        
                        // Extract tab name from onclick attribute
                        const onclickAttr = this.getAttribute('onclick');
                        if (onclickAttr) {
                            const match = onclickAttr.match(/switchTab\('([^']+)'\)/);
                            if (match) {
                                const tabName = match[1];
                                switchTab(tabName, this);
                            }
                        }
                        
                        // Reset visual feedback
                        setTimeout(() => {
                            if (!this.classList.contains('active')) {
                                this.style.background = '';
                            }
                        }, 150);
                    });
                    
                    // Also add click handler as fallback
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const onclickAttr = this.getAttribute('onclick');
                        if (onclickAttr) {
                            const match = onclickAttr.match(/switchTab\('([^']+)'\)/);
                            if (match) {
                                const tabName = match[1];
                                switchTab(tabName, this);
                            }
                        }
                    });
                });
                
                // Prevent zoom on double tap for non-tab buttons
                const buttons = document.querySelectorAll('.control-button, .map-control-btn');
                buttons.forEach(button => {
                    button.addEventListener('touchend', function(e) {
                        e.preventDefault();
                    });
                });
                
                // Add swipe gesture for tab switching
                let touchStartX = null;
                let touchStartY = null;
                
                document.addEventListener('touchstart', function(e) {
                    touchStartX = e.touches[0].clientX;
                    touchStartY = e.touches[0].clientY;
                });
                
                document.addEventListener('touchmove', function(e) {
                    if (!touchStartX || !touchStartY) return;
                    
                    const touchEndX = e.touches[0].clientX;
                    const touchEndY = e.touches[0].clientY;
                    
                    const diffX = touchStartX - touchEndX;
                    const diffY = touchStartY - touchEndY;
                    
                    // Only trigger if horizontal swipe is dominant
                    if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                        const activeTab = document.querySelector('.tab-button.active');
                        if (activeTab) {
                            const isOperationsActive = activeTab.textContent.includes('Operations');
                            
                            // Swipe left to go to CEO dashboard
                            if (diffX > 0 && isOperationsActive) {
                                const ceoButton = document.querySelector('button[onclick*="switchTab(\'ceo\'"]');
                                switchTab('ceo', ceoButton);
                                e.preventDefault();
                            }
                            // Swipe right to go to Operations dashboard  
                            else if (diffX < 0 && !isOperationsActive) {
                                const opsButton = document.querySelector('button[onclick*="switchTab(\'operations\'"]');
                                switchTab('operations', opsButton);
                                e.preventDefault();
                            }
                        }
                        
                        touchStartX = null;
                        touchStartY = null;
                    }
                });
            }
        }
        
        // Handle orientation changes
        function handleOrientationChange() {
            // Force re-render of charts and maps on orientation change
            setTimeout(() => {
                // Regenerate production chart with new dimensions
                const chart = document.getElementById('production-chart');
                if (chart) {
                    chart.innerHTML = '';
                    generateProductionChart();
                }
                
                // Adjust map legend position
                const legends = document.querySelectorAll('.map-legend');
                legends.forEach(legend => {
                    if (window.innerWidth <= 768) {
                        legend.style.position = 'static';
                        legend.style.marginTop = '1rem';
                    } else {
                        legend.style.position = 'absolute';
                        legend.style.marginTop = '0';
                    }
                });
            }, 300);
        }
        
        // Add resize listener for responsive updates
        window.addEventListener('resize', handleOrientationChange);
        window.addEventListener('orientationchange', handleOrientationChange);
        
        // Live stock price function
        async function updateStockPrice() {
            try {
                // Using Alpha Vantage free API for stock data
                const response = await fetch('https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=EQT&apikey=demo');
                const data = await response.json();
                
                if (data['Global Quote']) {
                    const price = parseFloat(data['Global Quote']['05. price']);
                    const change = parseFloat(data['Global Quote']['09. change']);
                    const changePercent = parseFloat(data['Global Quote']['10. change percent'].replace('%', ''));
                    
                    document.getElementById('stock-price').textContent = `$${price.toFixed(2)}`;
                    document.getElementById('stock-change').textContent = `${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(1)}% today`;
                    
                    // Update color based on performance
                    const stockCard = document.getElementById('stock-price');
                    const stockChange = document.getElementById('stock-change');
                    if (changePercent >= 0) {
                        stockCard.className = 'kpi-value kpi-normal';
                        stockChange.style.color = '#10b981';
                    } else {
                        stockCard.className = 'kpi-value kpi-warning';
                        stockChange.style.color = '#f59e0b';
                    }
                } else {
                    // Fallback to approximate current price
                    document.getElementById('stock-price').textContent = '$52.15';
                    document.getElementById('stock-change').textContent = '+1.2% today';
                }
            } catch (error) {
                console.log('Stock API error, using fallback data');
                document.getElementById('stock-price').textContent = '$52.15';
                document.getElementById('stock-change').textContent = 'Market data';
                document.getElementById('stock-change').style.color = '#9ca3af';
            }
        }
        
        // Initialize
        generateWellMap();
        generateProductionChart();
        simulateRealTimeData();
        initMobileOptimizations();
        updateStockPrice();
        
        // Update stock price every 5 minutes
        setInterval(updateStockPrice, 300000);
    </script>
</body>
</html>